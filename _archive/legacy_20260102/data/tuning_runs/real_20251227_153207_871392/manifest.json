{
  "run_id": "gate2_20251227_154011_190efa",
  "created_at": "2025-12-27T15:40:11.943160",
  "schema_version": "4.1",
  "stage": "gate2",
  "config": {
    "period": {
      "start_date": "2021-01-01T00:00:00",
      "end_date": "2023-12-31T00:00:00"
    },
    "lookbacks": [
      3,
      6,
      12
    ],
    "lookback_combination": "min",
    "trials": 50,
    "objective": "val_sharpe_with_mdd_penalty",
    "split": {
      "method": "chronological",
      "target_ratios": {
        "train": 0.7,
        "val": 0.15,
        "test": 0.15
      },
      "min_val_months": 6,
      "min_test_months": 6,
      "applied": {
        "train_months": 0,
        "val_months": 0,
        "test_months": 0
      }
    },
    "guardrails": {
      "preset": "lax",
      "min_trades": 30,
      "min_exposure_ratio": 0.3,
      "max_annual_turnover": 24
    },
    "variables": {},
    "cost_assumptions": {
      "commission_rate": 0.00015,
      "slippage_rate": 0.001,
      "cost_type": "one_way",
      "unit": "decimal"
    }
  },
  "data": {
    "universe_version": "",
    "universe_source": "KRX",
    "delisted_handling": "exclude_from_start",
    "survivorship_bias": "point_in_time",
    "price_type": "adj_close",
    "dividend_handling": "total_return",
    "data_version": "parquet_v1",
    "universe_hash": "",
    "universe_count": 14,
    "requested_codes_count": 14,
    "effective_codes_count": 14,
    "requested_hash": "",
    "effective_hash": "",
    "sample_codes": [
      "005930"
    ]
  },
  "results": {
    "best_trial": {
      "trial_number": 1,
      "params": {
        "ma_period": 50,
        "rsi_period": 29,
        "stop_loss_pct": 0.13
      },
      "metrics": {
        "train": {
          "sharpe": -2.2873580752143363,
          "cagr": -0.07766016220985206,
          "mdd": -0.1581909120701125
        },
        "val": {
          "sharpe": -2.0074806090254906,
          "cagr": -0.08668033028152088,
          "mdd": -0.05762713340362069
        },
        "test": null
      },
      "guardrail_checks": {
        "num_trades": 526,
        "exposure_ratio": 0.2,
        "annual_turnover": 0.0
      },
      "logic_checks": {
        "rsi_scale_days": 29,
        "rsi_scale_events": 10
      },
      "anomaly_flags": [],
      "debug": {
        "min_lookback_months": 6,
        "lookback_start_date": "2023-06-30 00:00:00",
        "params_hash": "65ee0087b6f20d12",
        "cache_key": "d203697a",
        "period_signature": "train:2021-01-04 00:00:00~2022-12-23 00:00:00|val:2022-12-26 00:00:00~2023-06-23 00:00:00"
      },
      "by_lookback": {
        "3": {
          "requested_lb": 3,
          "effective_lb": "283d",
          "val_effective_start_date": "2023-03-23 00:00:00",
          "val_effective_end_date": "2023-12-31 00:00:00",
          "val_bars_used": 63,
          "val_trades": 274,
          "val_is_capped": false,
          "val_sharpe": -0.7020715638351585,
          "score": -0.7020715638351585
        },
        "6": {
          "requested_lb": 6,
          "effective_lb": "370d",
          "val_effective_start_date": "2022-12-26 00:00:00",
          "val_effective_end_date": "2023-12-31 00:00:00",
          "val_bars_used": 122,
          "val_trades": 526,
          "val_is_capped": false,
          "val_sharpe": -2.0074806090254906,
          "score": -2.0074806090254906
        },
        "12": {
          "requested_lb": 12,
          "effective_lb": "370d",
          "val_effective_start_date": "2022-12-26 00:00:00",
          "val_effective_end_date": "2023-12-31 00:00:00",
          "val_bars_used": 122,
          "val_trades": 526,
          "val_is_capped": false,
          "val_sharpe": -2.0074806090254906,
          "score": -2.0074806090254906
        }
      },
      "combined_score": null,
      "walkforward": {
        "windows_detail": [
          {
            "train_period": {
              "start": "2021-01-01 00:00:00",
              "end": "2022-01-01 00:00:00"
            },
            "val_period": {
              "start": "2022-01-01 00:00:00",
              "end": "2022-04-01 00:00:00"
            },
            "outsample_period": {
              "start": "2022-04-01 00:00:00",
              "end": "2022-07-01 00:00:00"
            },
            "outsample_bars": 63,
            "outsample_trades": 280,
            "outsample_sharpe": -1.8436500551578656
          },
          {
            "train_period": {
              "start": "2021-07-01 00:00:00",
              "end": "2022-07-01 00:00:00"
            },
            "val_period": {
              "start": "2022-07-01 00:00:00",
              "end": "2022-10-01 00:00:00"
            },
            "outsample_period": {
              "start": "2022-10-01 00:00:00",
              "end": "2023-01-01 00:00:00"
            },
            "outsample_bars": 62,
            "outsample_trades": 270,
            "outsample_sharpe": -0.9207963212484637
          },
          {
            "train_period": {
              "start": "2022-01-01 00:00:00",
              "end": "2023-01-01 00:00:00"
            },
            "val_period": {
              "start": "2023-01-01 00:00:00",
              "end": "2023-04-01 00:00:00"
            },
            "outsample_period": {
              "start": "2023-04-01 00:00:00",
              "end": "2023-07-01 00:00:00"
            },
            "outsample_bars": 61,
            "outsample_trades": 268,
            "outsample_sharpe": -0.7640580874416235
          }
        ],
        "windows_count": 3,
        "total_outsample_trades": 818,
        "avg_outsample_sharpe": -1.1761681546159843,
        "params_source": "best_trial",
        "params_hash": "65ee0087b6f20d12"
      }
    },
    "all_trials_count": 50,
    "convergence_trial": null,
    "search_coverage": 50.0,
    "failure_stats": {
      "Unknown Error": 5,
      "exposure_ratio(0.08) < 0.1": 2,
      "exposure_ratio(0.05) < 0.1": 1,
      "exposure_ratio(0.02) < 0.1": 1,
      "num_trades(0) < 10": 1,
      "exposure_ratio(0.07) < 0.1": 1,
      "exposure_ratio(0.03) < 0.1": 1,
      "exposure_ratio(0.09) < 0.1": 1
    }
  },
  "environment": {
    "code_version": "git:a9ea3040",
    "python_version": "3.13.5",
    "optuna_version": "4.5.0",
    "random_seed": 42,
    "splitter_version": "chronological_v1",
    "cost_model_version": "simple_oneway_v1"
  },
  "engine_health": {
    "is_valid": true,
    "warnings": [],
    "data_quality": {
      "missing_ratio": 0.001,
      "outlier_count": 0
    }
  }
}
# íŠœë‹/ê²€ì¦ ì²´ê³„ ì„¤ê³„ ë¬¸ì„œ (v2)

> **ì‘ì„±**: 2025-12-16  
> **v2 ìˆ˜ì •**: 2025-12-16  
> **Author**: í˜•ìˆ˜  
> **ëª©ì **: íŠœë‹ íŒŒë¼ë¯¸í„° ìŠ¤í‚¤ë§ˆ í‘œì¤€í™” ë° ê²€ì¦ ì²´ê³„(Test ë´‰ì¸, Walk-Forward, ëª©ì í•¨ìˆ˜) ì„¤ê³„

---

## Changelog (v1 â†’ v2)

| í•­ëª© | v1 ë¬¸ì œ | v2 ìˆ˜ì • |
|------|---------|---------|
| Walk-Forward ìœˆë„ìš° | end_date ì´ˆê³¼ (ë¯¸ë˜ ë°ì´í„° ì‚¬ìš©) | ì „ì²´ ê¸°ê°„ ë‚´ì—ì„œë§Œ ìƒì„±, ì •í™•í•œ ì˜ˆì‹œ |
| ì§€í‘œ ë‹¨ìœ„ | %ì™€ ì†Œìˆ˜ í˜¼ìš© | **ì†Œìˆ˜ í†µì¼** (manifest/ì—”ì§„), UIë§Œ % í‘œì‹œ |
| ë©€í‹° ë£©ë°± ê²°í•© | ê·œì¹™ ì—†ìŒ | `min()` ë˜ëŠ” `mean - k*std` ê²°í•© ì •ì±… |
| Split ë°©ì‹ | ë¹„ìœ¨ë§Œ ëª…ì‹œ | **Chronological ê°•ì œ**, ìµœì†Œ ê°œì›”ìˆ˜ ê·œì¹™ |
| Objective ê°€ë“œë ˆì¼ | ì—†ìŒ | ìµœì†Œ ê±°ë˜ìˆ˜, ë¹„ìš© ê¸°ë³¸ ì ìš© |
| run_manifest | ë²„ì „ ì •ë³´ ë¶€ì¡± | seed, splitter_version, cost_model ì¶”ê°€ |
| ëˆ„ìˆ˜ ë°©ì§€ | ì–¸ê¸‰ ì—†ìŒ | **ì²´í¬ë¦¬ìŠ¤íŠ¸ ë¶€ë¡** ì¶”ê°€ |

---

## 1. ë°°ê²½ / ë¬¸ì œ ì •ì˜

### 1.1 í˜„ì¬ ìƒí™©

| í•­ëª© | í˜„ì¬ ìƒíƒœ |
|------|----------|
| í™œì„± íŠœë‹ ë³€ìˆ˜ | ma_period, rsi_period, stop_loss (3ê°œ) |
| ë¹„í™œì„± í›„ë³´ | volatility_filter, market_breadth, rsi_overbought, rsi_oversold, rebalance_threshold |
| íŠœë‹ ë°©ì‹ | Optuna ë²”ìœ„ íƒìƒ‰ (ë‹¨ì¼ ë°±í…ŒìŠ¤íŠ¸ ì•„ë‹˜) |
| ê²€ì¦ ë¶„í•  | Train 70% / Val 15% / Test 15% |

### 1.2 í•µì‹¬ ë¬¸ì œ

**ë°˜ë³µë˜ëŠ” íŒ¨í„´:**
```
Train Sharpe: ë†’ìŒ (2.0+)
Val Sharpe: 0 ì´í•˜ / ë¶€ì§„
Test Sharpe: ë¹„ì •ìƒì ìœ¼ë¡œ ë†’ìŒ (1.5+)
```

**ì›ì¸ ë¶„ì„:**
1. **Test ë°ì´í„° ëˆ„ìˆ˜**: íŠœë‹ ì„ íƒ ì‹œ Test ì„±ê³¼ë¥¼ ì°¸ì¡°í•˜ë©´ ì‚¬ì‹¤ìƒ Testë¡œ ìµœì í™”í•œ ê²ƒ
2. **ë‹¨ì¼ ë¶„í• ì˜ í•œê³„**: íŠ¹ì • ê¸°ê°„ì— ìš´ ì¢‹ê²Œ ë§ëŠ” íŒŒë¼ë¯¸í„°ê°€ ì„ íƒë¨
3. **Val êµ¬ê°„ ì§§ìŒ**: 15%ëŠ” ì•½ 2~3ê°œì›”, ë…¸ì´ì¦ˆì— ì·¨ì•½
4. **ëª©ì í•¨ìˆ˜ ë‹¨ìˆœ**: Sharpeë§Œ ìµœëŒ€í™” â†’ ê³¼ì í•© ìœ ë„
5. **ê±°ë˜ ë¶€ì¡± ì‹œ Sharpe ì™œê³¡**: ê±°ë˜ê°€ ì ìœ¼ë©´ ë¹„ì •ìƒì ìœ¼ë¡œ ë†’ì€ Sharpe ë°œìƒ

### 1.3 í•´ê²° ë°©í–¥

| ë¬¸ì œ | í•´ê²°ì±… |
|------|--------|
| Test ëˆ„ìˆ˜ | **Test ë´‰ì¸** â€” ì„ íƒ/ì •ë ¬ì— ì‚¬ìš© ê¸ˆì§€ |
| ë‹¨ì¼ ë¶„í•  í•œê³„ | **ë¯¸ë‹ˆ Walk-Forward** â€” ë¡¤ë§ ê²€ì¦ |
| Val ì§§ìŒ | **ìµœì†Œ ê°œì›”ìˆ˜ ê·œì¹™** (Val â‰¥ 4M, Test â‰¥ 4M) |
| ê³¼ì í•© | **ë³µí•© ëª©ì í•¨ìˆ˜** â€” Val ê¸°ë°˜ + ì•ˆì •ì„± í˜ë„í‹° + ê°€ë“œë ˆì¼ |
| ì¬í˜„ì„± | **run_manifest** â€” ëª¨ë“  ì‹¤í–‰ ì¡°ê±´ ì €ì¥ (seed í¬í•¨) |
| ëˆ„ìˆ˜ | **ì²´í¬ë¦¬ìŠ¤íŠ¸** â€” ì‹ í˜¸/ì²´ê²° ì‹œì , ê²°ì¸¡ ì²˜ë¦¬ ë“± |

---

## 2. ì„¤ê³„ ì›ì¹™ (v2 ê°•í™”)

### 2.1 ê²€ì¦ ë´‰ì¸ ì›ì¹™

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Train (70%)  â”‚  Val (15%)  â”‚  Test (15%)                  â”‚
â”‚               â”‚             â”‚                              â”‚
â”‚  í•™ìŠµ/íƒìƒ‰    â”‚  ì„ íƒ ê¸°ì¤€  â”‚  ìµœì¢… ë³´ê³ ì„œì—ì„œë§Œ ì—´ëŒ      â”‚
â”‚               â”‚             â”‚  (ì„ íƒ/ì •ë ¬/ìµœì í™” ê¸ˆì§€)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ê°•ì œ ê·œì¹™:**
- Optuna objective = Val ì„±ê³¼ë§Œ ì‚¬ìš©
- UI ê²°ê³¼ í…Œì´ë¸” ì •ë ¬ = Val Sharpe ê¸°ì¤€
- Test ì»¬ëŸ¼ì€ "ìµœì¢… ë¦¬í¬íŠ¸" íƒ­ì—ì„œë§Œ í‘œì‹œ

### 2.2 Chronological Split ê°•ì œ (v2 ì¶”ê°€)

```
âš ï¸ ì ˆëŒ€ ê·œì¹™: Splitì€ ë°˜ë“œì‹œ ì‹œê°„ ìˆœì„œ(ê³¼ê±°â†’ë¯¸ë˜)ë¡œ ìˆ˜í–‰í•œë‹¤.
   ëœë¤ ë¶„í• ì€ ê¸ˆì§€. ë¯¸ë˜ ë°ì´í„°ê°€ Trainì— ì„ì´ë©´ ëˆ„ìˆ˜ ë°œìƒ.
```

**Split ê·œì¹™:**
```python
# âœ… ì˜¬ë°”ë¥¸ ë¶„í•  (Chronological)
data = data.sort_values('date')
train = data[:int(len(data) * 0.70)]
val   = data[int(len(data) * 0.70):int(len(data) * 0.85)]
test  = data[int(len(data) * 0.85):]

# âŒ ê¸ˆì§€ (Random)
train, val, test = random_split(data, [0.70, 0.15, 0.15])
```

### 2.3 ìµœì†Œ ê¸°ê°„ ê·œì¹™ (v2 ì¶”ê°€)

| êµ¬ê°„ | ìµœì†Œ ê¸°ê°„ | ì´ìœ  |
|------|----------|------|
| Val | **4ê°œì›” ì´ìƒ** | ë…¸ì´ì¦ˆ ê°ì†Œ, ê³„ì ˆì„± ì¼ë¶€ ë°˜ì˜ |
| Test | **4ê°œì›” ì´ìƒ** | ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ìµœì¢… í‰ê°€ |
| Train | **12ê°œì›” ì´ìƒ** | ì¶©ë¶„í•œ í•™ìŠµ ë°ì´í„° |

**ì˜ˆì™¸ ì²˜ë¦¬:**
```python
if val_months < 4 or test_months < 4:
    raise ValueError("Val/Test ê¸°ê°„ì´ 4ê°œì›” ë¯¸ë§Œì…ë‹ˆë‹¤. ë” ê¸´ ë°±í…ŒìŠ¤íŠ¸ ê¸°ê°„ì„ ì„¤ì •í•˜ì„¸ìš”.")
```

### 2.4 ë‹¨ìœ„ í†µì¼ ì›ì¹™ (v2 ì¶”ê°€)

```
âš ï¸ ì ˆëŒ€ ê·œì¹™: ì—”ì§„/manifest ë‚´ë¶€ëŠ” ì†Œìˆ˜(0~1), UI í‘œì‹œë§Œ %
```

| ì§€í‘œ | ë‚´ë¶€ ì €ì¥ (ì†Œìˆ˜) | UI í‘œì‹œ (%) |
|------|-----------------|-------------|
| CAGR | 0.25 | 25% |
| MDD | -0.12 | -12% |
| stop_loss | -0.10 | -10% |
| commission | 0.00015 | 0.015% |
| slippage | 0.001 | 0.1% |
| Sharpe | 1.5 (ë¬´ë‹¨ìœ„) | 1.5 |

**ë³€í™˜ í•¨ìˆ˜:**
```python
def to_display(value, is_percent=True):
    """ë‚´ë¶€ê°’ â†’ UI í‘œì‹œ"""
    return f"{value * 100:.1f}%" if is_percent else f"{value:.2f}"

def from_display(value_str):
    """UI ì…ë ¥ â†’ ë‚´ë¶€ê°’"""
    if value_str.endswith('%'):
        return float(value_str[:-1]) / 100
    return float(value_str)
```

### 2.5 íƒìƒ‰ ê³µê°„ ì œì–´ ì›ì¹™

```
í™œì„± ë³€ìˆ˜ ìˆ˜ Ã— ê° ë³€ìˆ˜ step ìˆ˜ = íƒìƒ‰ ê³µê°„
```

**ì˜ˆì‹œ:**
- ma_period: (200-20)/10 = 18ê°œ
- rsi_period: (30-5)/1 = 25ê°œ
- stop_loss: (20-5)/1 = 15ê°œ
- **ì´ ì¡°í•©: 18 Ã— 25 Ã— 15 = 6,750ê°œ**

**íƒìƒ‰ ì»¤ë²„ë¦¬ì§€ (v2 ì¶”ê°€):**
```
Trials = 50ì¼ ë•Œ, ì»¤ë²„ë¦¬ì§€ â‰ˆ 50 / 6,750 = 0.7%
â†’ "ì „ìˆ˜ì¡°ì‚¬ê°€ ì•„ë‹Œ ìƒ˜í”Œë§ íƒìƒ‰"ì„ì„ UIì— ëª…ì‹œ
```

---

## 3. ì§€í‘œ ë‹¨ìœ„ ì„¤ê³„ (v2 ì‹ ê·œ ì„¹ì…˜)

### 3.1 ë‚´ë¶€ ì €ì¥ ê·œì¹™

```yaml
# run_manifest.json ì˜ˆì‹œ (ëª¨ë“  ë¹„ìœ¨ì€ ì†Œìˆ˜)
metrics:
  train:
    sharpe: 2.1          # ë¬´ë‹¨ìœ„
    cagr: 0.25           # 25% â†’ 0.25
    mdd: -0.08           # -8% â†’ -0.08
  val:
    sharpe: 1.5
    cagr: 0.18
    mdd: -0.12
  test:
    sharpe: 1.8
    cagr: 0.20
    mdd: -0.10

params:
  ma_period: 60          # ì •ìˆ˜ (ì¼)
  rsi_period: 14         # ì •ìˆ˜ (ì¼)
  stop_loss: -0.10       # -10% â†’ -0.10 (ì†Œìˆ˜)

cost_assumptions:
  commission_rate: 0.00015   # 0.015% â†’ 0.00015
  slippage_rate: 0.001       # 0.1% â†’ 0.001
```

### 3.2 Objective í˜ë„í‹° ê³„ì‚° (ë‹¨ìœ„ í†µì¼)

```python
def objective_with_mdd_penalty(trial):
    result = run_backtest(trial)
    
    val_sharpe = result.val_sharpe          # ë¬´ë‹¨ìœ„
    val_mdd = result.val_mdd                # ì†Œìˆ˜ (ì˜ˆ: -0.12)
    
    # MDDê°€ -0.15 (15%) ì´ˆê³¼ ì‹œ í˜ë„í‹°
    # abs(-0.12) = 0.12, 0.15 - 0.12 = 0.03 > 0 â†’ í˜ë„í‹° ì—†ìŒ
    # abs(-0.18) = 0.18, 0.18 - 0.15 = 0.03 â†’ í˜ë„í‹° 0.03 * 10 = 0.3
    mdd_threshold = 0.15  # 15%ë¥¼ ì†Œìˆ˜ë¡œ
    mdd_penalty = max(0, abs(val_mdd) - mdd_threshold) * 10
    
    return val_sharpe - mdd_penalty
```

---

## 4. ë©€í‹° ë£©ë°± ê²°í•© ì„¤ê³„ (v2 ì‹ ê·œ ì„¹ì…˜)

### 4.1 ë¬¸ì œ ì •ì˜

UIì—ì„œ 3M/6M/12M ë£©ë°±ì„ ë™ì‹œì— ì„ íƒí•  ìˆ˜ ìˆëŠ”ë°, ê° ë£©ë°±ë³„ë¡œ Val ì ìˆ˜ê°€ ë‹¤ë¥´ê²Œ ë‚˜ì˜´.
ì´ë¥¼ **í•˜ë‚˜ì˜ objectiveë¡œ ê²°í•©í•˜ëŠ” ê·œì¹™**ì´ í•„ìš”.

### 4.2 ê²°í•© ë°©ì‹ ë¹„êµ

| ë°©ì‹ | ê³µì‹ | ì¥ì  | ë‹¨ì  |
|------|------|------|------|
| **í‰ê· ** | `mean(scores)` | ë‹¨ìˆœ | í•˜ë‚˜ê°€ ë‚˜ë¹ ë„ í‰ê· ì— ë¬»í˜ â†’ ê³¼ì í•© |
| **ìµœì†Ÿê°’ (min)** | `min(scores)` | ìµœì•… ì¼€ì´ìŠ¤ ë°©ì–´ | ë³´ìˆ˜ì , ìµœì  ì„±ê³¼ ë‚®ìŒ |
| **í‰ê· -í‘œì¤€í¸ì°¨** | `mean - k*std` | ê· í˜• (ì•ˆì •ì„± ë°˜ì˜) | k ì„¤ì • ì£¼ê´€ì  |
| **ê°€ì¤‘ í‰ê· ** | `w1*s1 + w2*s2 + w3*s3` | ë£©ë°±ë³„ ì¤‘ìš”ë„ ë°˜ì˜ | ê°€ì¤‘ì¹˜ ì„¤ì • ì£¼ê´€ì  |

### 4.3 ê¶Œì¥ ê²°í•© ê·œì¹™

**Option A: ìµœì†Ÿê°’ (ê°•ë ¥í•œ ì•ˆì •ì„± ì§€í–¥) â€” ê¶Œì¥**

```python
def multi_lookback_objective(trial, lookbacks=[3, 6, 12]):
    scores = []
    for lb in lookbacks:
        result = run_backtest(trial, lookback_months=lb)
        scores.append(result.val_sharpe)
    
    # ìµœì•…ì˜ ë£©ë°±ì—ì„œë„ ì„±ê³¼ê°€ ë‚˜ì™€ì•¼ ì„ íƒë¨
    return min(scores)
```

**Option B: í‰ê·  - k*í‘œì¤€í¸ì°¨ (ê· í˜•í˜•)**

```python
def multi_lookback_objective(trial, lookbacks=[3, 6, 12], k=1.0):
    scores = []
    for lb in lookbacks:
        result = run_backtest(trial, lookback_months=lb)
        scores.append(result.val_sharpe)
    
    # í‰ê· ì´ ë†’ì•„ë„ ë¶„ì‚°ì´ í¬ë©´ í˜ë„í‹°
    return np.mean(scores) - k * np.std(scores)
```

### 4.4 ë£©ë°± íŠœë‹ ì •ì±…

**ë°©ì‹ 1: ë£©ë°±ë³„ ë…ë¦½ íŠœë‹ (í˜„ì¬ êµ¬ì¡°) â€” ê¶Œì¥**

```
3M íŠœë‹ â†’ best_params_3m
6M íŠœë‹ â†’ best_params_6m
12M íŠœë‹ â†’ best_params_12m
â†’ ì•™ìƒë¸” ê°€ì¤‘ í‰ê· ìœ¼ë¡œ ìµœì¢… íŒŒë¼ë¯¸í„° ê²°ì •
```

- **ì¥ì **: ê° ë£©ë°±ì— ìµœì í™”ëœ íŒŒë¼ë¯¸í„° ë„ì¶œ
- **ë‹¨ì **: 3ë°°ì˜ íŠœë‹ ì‹œê°„

**ë°©ì‹ 2: ë£©ë°±ì„ Optuna categorical ë³€ìˆ˜ë¡œ**

```python
lookback = trial.suggest_categorical('lookback', [3, 6, 12])
result = run_backtest(trial, lookback_months=lookback)
return result.val_sharpe
```

- **ì¥ì **: ë‹¨ì¼ íŠœë‹ìœ¼ë¡œ ìµœì  ë£©ë°±ê¹Œì§€ ì„ íƒ
- **ë‹¨ì **: ë£©ë°± ê°„ ë¹„êµê°€ ì•„ë‹Œ "í•˜ë‚˜ë§Œ ì„ íƒ"

**ê¶Œì¥**: ë©€í‹° ì„ íƒ ì‹œ **ë°©ì‹ 1 + min() ê²°í•©**, ë‹¨ì¼ ì„ íƒ ì‹œ **ë°©ì‹ 2**

---

## 5. ë¯¸ë‹ˆ Walk-Forward ì„¤ê³„ (v2 ìˆ˜ì •)

### 5.1 ìœˆë„ìš° ìƒì„± ê·œì¹™ (v2 ìˆ˜ì •)

```
âš ï¸ ì ˆëŒ€ ê·œì¹™: ëª¨ë“  ìœˆë„ìš°ëŠ” ì „ì²´ ê¸°ê°„(start_date ~ end_date) ë‚´ì—ì„œë§Œ ìƒì„±.
   end_dateë¥¼ ì´ˆê³¼í•˜ëŠ” ìœˆë„ìš°ëŠ” ìƒì„±í•˜ì§€ ì•Šê±°ë‚˜ ì˜ë¼ì„œ ì‚¬ìš©.
```

**ìœˆë„ìš° ìƒì„± ì•Œê³ ë¦¬ì¦˜:**
```python
def generate_windows(start_date, end_date, train_months, val_months, test_months, stride_months):
    """
    ì „ì²´ ê¸°ê°„ ë‚´ì—ì„œë§Œ ìœˆë„ìš° ìƒì„±.
    end_dateë¥¼ ì´ˆê³¼í•˜ëŠ” ìœˆë„ìš°ëŠ” ì œì™¸.
    """
    windows = []
    window_size = train_months + val_months + test_months
    
    current_start = start_date
    while True:
        train_end = current_start + relativedelta(months=train_months)
        val_start = train_end
        val_end = val_start + relativedelta(months=val_months)
        test_start = val_end
        test_end = test_start + relativedelta(months=test_months)
        
        # âš ï¸ í•µì‹¬: end_date ì´ˆê³¼ ì‹œ ì¤‘ë‹¨
        if test_end > end_date:
            break
        
        windows.append({
            'train': (current_start, train_end - timedelta(days=1)),
            'val': (val_start, val_end - timedelta(days=1)),
            'test': (test_start, test_end - timedelta(days=1)),
        })
        
        current_start += relativedelta(months=stride_months)
    
    return windows
```

### 5.2 ì •í™•í•œ ìœˆë„ìš° ì˜ˆì‹œ (v2 ìˆ˜ì •)

**ì„¤ì •:**
- ì „ì²´ ê¸°ê°„: 2024-01-01 ~ 2025-12-31 (24ê°œì›”)
- Train: 12ê°œì›”, Val: 3ê°œì›”, Test: 3ê°œì›”
- Stride: 3ê°œì›”

**ìƒì„±ëœ ìœˆë„ìš°:**

| Window | Train | Val | Test |
|--------|-------|-----|------|
| W1 | 2024-01-01 ~ 2024-12-31 | 2025-01-01 ~ 2025-03-31 | 2025-04-01 ~ 2025-06-30 |
| W2 | 2024-04-01 ~ 2025-03-31 | 2025-04-01 ~ 2025-06-30 | 2025-07-01 ~ 2025-09-30 |
| W3 | 2024-07-01 ~ 2025-06-30 | 2025-07-01 ~ 2025-09-30 | 2025-10-01 ~ 2025-12-31 |

**W4ëŠ” ìƒì„±ë˜ì§€ ì•ŠìŒ** (Testê°€ 2026-01~03ìœ¼ë¡œ end_date ì´ˆê³¼)

### 5.3 ì§‘ê³„ ì§€í‘œ

```yaml
mini_walkforward_result:
  windows_count: 3
  sharpe:
    mean: 1.2
    std: 0.4
    min: 0.6
    max: 1.8
  cagr:
    mean: 0.15        # ì†Œìˆ˜ (15%)
    std: 0.08
  mdd:
    mean: -0.12       # ì†Œìˆ˜ (-12%)
    worst: -0.18
  
  # ì•ˆì •ì„± ì ìˆ˜
  stability_score: 1.5   # = sharpe_mean / (sharpe_std + 0.1)
  
  # ìŠ¹ë¥ 
  win_rate: 1.0          # 3/3 = 100% (sharpe > 0ì¸ ìœˆë„ìš° ë¹„ìœ¨)
```

---

## 6. ëª©ì í•¨ìˆ˜(Objective) ì„¤ê³„ (v2 ê°•í™”)

### 6.1 ê°€ë“œë ˆì¼ (v2 ì¶”ê°€)

```python
def objective_with_guardrails(trial):
    result = run_backtest(trial)
    
    # ========== ê°€ë“œë ˆì¼ (í•˜ë“œ ì»·) ==========
    
    # 1. ìµœì†Œ ê±°ë˜ìˆ˜: 30íšŒ ë¯¸ë§Œì´ë©´ í†µê³„ì ìœ¼ë¡œ ë¬´ì˜ë¯¸
    if result.num_trades < 30:
        return -999  # ê°•ì œ íƒˆë½
    
    # 2. ìµœì†Œ ë…¸ì¶œì¼: ì „ì²´ ê¸°ê°„ì˜ 30% ì´ìƒ í¬ì§€ì…˜ ë³´ìœ 
    if result.exposure_ratio < 0.30:
        return -999
    
    # 3. ìµœëŒ€ Turnover: ì—°ê°„ 24íšŒ ì´ˆê³¼ ì‹œ ë¹„ìš© ê³¼ë‹¤
    if result.annual_turnover > 24:
        return -999
    
    # ========== ì ìˆ˜ ê³„ì‚° ==========
    
    val_sharpe = result.val_sharpe
    val_mdd = result.val_mdd  # ì†Œìˆ˜ (ì˜ˆ: -0.12)
    
    # MDD í˜ë„í‹° (15% ì´ˆê³¼ ì‹œ)
    mdd_penalty = max(0, abs(val_mdd) - 0.15) * 10
    
    return val_sharpe - mdd_penalty
```

### 6.2 ê±°ë˜ë¹„ìš© ê¸°ë³¸ ì ìš© (v2 ì¶”ê°€)

```
âš ï¸ ì ˆëŒ€ ê·œì¹™: ê±°ë˜ë¹„ìš©ì€ "ì˜µì…˜"ì´ ì•„ë‹ˆë¼ "ê¸°ë³¸ê°’"ìœ¼ë¡œ í•­ìƒ ì ìš©.
   ë¹„ìš© ì—†ì´ íŠœë‹í•˜ë©´ Testì—ì„œ ì„±ê³¼ê°€ ê¸‰ë½í•˜ëŠ” "ì‹ ë‚´ë¦¼" í˜„ìƒ ë°œìƒ.
```

**ê¸°ë³¸ ë¹„ìš© ì„¤ì •:**
```python
DEFAULT_COSTS = {
    'commission_rate': 0.00015,  # 0.015% (í¸ë„)
    'slippage_rate': 0.001,      # 0.1%
}

def run_backtest(params, costs=DEFAULT_COSTS):
    # ë¹„ìš©ì€ í•­ìƒ ì ìš©
    ...
```

### 6.3 ì „ì²´ Objective í•¨ìˆ˜ (v2 í†µí•©)

```python
def objective_v2(trial, lookbacks=[3, 6, 12]):
    """
    v2 ëª©ì í•¨ìˆ˜:
    - ë©€í‹° ë£©ë°± ê²°í•© (min)
    - ê°€ë“œë ˆì¼ ì ìš©
    - ê±°ë˜ë¹„ìš© ê¸°ë³¸ ì ìš©
    - ë‹¨ìœ„ í†µì¼ (ì†Œìˆ˜)
    """
    scores = []
    
    for lb in lookbacks:
        result = run_backtest(
            trial,
            lookback_months=lb,
            costs=DEFAULT_COSTS  # ë¹„ìš© ê¸°ë³¸ ì ìš©
        )
        
        # ê°€ë“œë ˆì¼ ì²´í¬
        if result.num_trades < 30:
            return -999
        if result.exposure_ratio < 0.30:
            return -999
        if result.annual_turnover > 24:
            return -999
        
        # Val ì ìˆ˜ ê³„ì‚° (MDD í˜ë„í‹° í¬í•¨)
        val_sharpe = result.val_sharpe
        val_mdd = result.val_mdd  # ì†Œìˆ˜
        mdd_penalty = max(0, abs(val_mdd) - 0.15) * 10
        
        score = val_sharpe - mdd_penalty
        scores.append(score)
    
    # ë©€í‹° ë£©ë°± ê²°í•©: ìµœì†Ÿê°’ (ì•ˆì •ì„± ì§€í–¥)
    return min(scores)
```

---

## 7. run_manifest ì„¤ê³„ (v2 ê°•í™”)

### 7.1 ìŠ¤í‚¤ë§ˆ (v2)

```json
{
  "run_id": "tuning_20251216_143052_abc123",
  "created_at": "2025-12-16T14:30:52+09:00",
  "schema_version": "2.0",
  
  "config": {
    "period": {
      "start_date": "2024-01-01",
      "end_date": "2025-12-31"
    },
    "lookbacks": [3, 6, 12],
    "lookback_combination": "min",
    "trials": 50,
    "objective": "val_sharpe_with_mdd_penalty_v2",
    
    "split": {
      "method": "chronological",
      "train_ratio": 0.70,
      "val_ratio": 0.15,
      "test_ratio": 0.15,
      "min_val_months": 4,
      "min_test_months": 4
    },
    
    "guardrails": {
      "min_trades": 30,
      "min_exposure_ratio": 0.30,
      "max_annual_turnover": 24
    },
    
    "variables": {
      "ma_period": {
        "enabled": true,
        "range": [20, 200],
        "step": 10,
        "type": "int"
      },
      "rsi_period": {
        "enabled": true,
        "range": [5, 30],
        "step": 1,
        "type": "int"
      },
      "stop_loss": {
        "enabled": true,
        "range": [-0.20, -0.05],
        "step": 0.01,
        "type": "float",
        "unit": "decimal"
      }
    },
    
    "cost_assumptions": {
      "commission_rate": 0.00015,
      "slippage_rate": 0.001,
      "unit": "decimal"
    }
  },
  
  "results": {
    "best_trial": {
      "trial_number": 1,
      "params": {
        "ma_period": 60,
        "rsi_period": 14,
        "stop_loss": -0.10
      },
      "metrics": {
        "train": { "sharpe": 2.1, "cagr": 0.25, "mdd": -0.08 },
        "val": { "sharpe": 1.5, "cagr": 0.18, "mdd": -0.12 },
        "test": { "sharpe": 1.8, "cagr": 0.20, "mdd": -0.10 }
      },
      "guardrail_checks": {
        "num_trades": 45,
        "exposure_ratio": 0.65,
        "annual_turnover": 12
      }
    },
    "all_trials_count": 50,
    "convergence_trial": 35,
    "search_coverage": 0.007
  },
  
  "environment": {
    "code_version": "git:abc123def",
    "data_version": "ohlcv_20251216",
    "python_version": "3.11.5",
    "optuna_version": "3.4.0",
    "random_seed": 42,
    "splitter_version": "chronological_v1",
    "cost_model_version": "simple_v1"
  },
  
  "engine_health": {
    "is_valid": true,
    "warnings": [],
    "data_quality": {
      "missing_ratio": 0.001,
      "outlier_count": 3
    }
  }
}
```

---

## 8. UI/UX ë³€ê²½ì•ˆ (v2)

### 8.1 ê²°ê³¼ í…Œì´ë¸” (engine_health í‘œì‹œ ì¶”ê°€)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  íŠœë‹ ê²°ê³¼ (Val ê¸°ì¤€ ì •ë ¬)                                              â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚                                                                         â”‚
â”‚  âš ï¸ ì„ íƒ ê¸°ì¤€ì€ Val ì„±ê³¼ì…ë‹ˆë‹¤. TestëŠ” ìµœì¢… í™•ì • í›„ ê³µê°œ.              â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ #  â”‚ MA â”‚RSI â”‚ SL(%) â”‚ Train  â”‚  Val   â”‚ Test â”‚ ê±°ë˜ìˆ˜â”‚ ìƒíƒœ     â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ 1  â”‚ 60 â”‚ 14 â”‚ -10%  â”‚  2.1   â”‚  1.5   â”‚  ğŸ”’  â”‚  45   â”‚ âœ… ì •ìƒ  â”‚  â”‚
â”‚  â”‚ 2  â”‚ 80 â”‚ 12 â”‚  -8%  â”‚  1.9   â”‚  1.3   â”‚  ğŸ”’  â”‚  38   â”‚ âœ… ì •ìƒ  â”‚  â”‚
â”‚  â”‚ 3  â”‚ 40 â”‚ 21 â”‚ -15%  â”‚  2.5   â”‚  0.2   â”‚  ğŸ”’  â”‚  12   â”‚ âš ï¸ ê±°ë˜â†“â”‚  â”‚
â”‚  â”‚ 4  â”‚ 30 â”‚  5 â”‚  -5%  â”‚  3.0   â”‚ -0.5   â”‚  ğŸ”’  â”‚  52   â”‚ âš ï¸ ê³¼ì í•©â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â”‚  ğŸ“Š íƒìƒ‰ ì»¤ë²„ë¦¬ì§€: 0.7% (50 trials / 6,750 ì¡°í•©)                       â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 íŠœë‹ ì„¤ì • íŒ¨ë„ (ë‹¨ìœ„ í‘œì‹œ ì¶”ê°€)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  íŠœë‹ ì„¤ì •                                      [ë²”ìœ„ ê¸°ë°˜ ìë™ íƒìƒ‰]   â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚                                                                         â”‚
â”‚  ğŸ“… ë°±í…ŒìŠ¤íŠ¸ ê¸°ê°„                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚
â”‚  â”‚ 2024-01-01   â”‚ ~  â”‚ 2025-12-31   â”‚  (24ê°œì›”)                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚
â”‚                                                                         â”‚
â”‚  ğŸ“Š ë£©ë°± ê¸°ê°„ (ë©€í‹° ì„ íƒ ì‹œ min() ê²°í•©)                                â”‚
â”‚  [3ê°œì›” âœ“] [6ê°œì›” âœ“] [12ê°œì›” âœ“]                                        â”‚
â”‚                                                                         â”‚
â”‚  âš™ï¸ Split ì„¤ì •                                                          â”‚
â”‚  Train: 70% â”‚ Val: 15% (ìµœì†Œ 4ê°œì›”) â”‚ Test: 15% (ìµœì†Œ 4ê°œì›”)           â”‚
â”‚  âš ï¸ Chronological ë¶„í•  (ì‹œê°„ ìˆœì„œ ê°•ì œ)                                â”‚
â”‚                                                                         â”‚
â”‚  ğŸ’° ê±°ë˜ë¹„ìš© (ê¸°ë³¸ ì ìš©)                                                â”‚
â”‚  ìˆ˜ìˆ˜ë£Œ: 0.015% â”‚ ìŠ¬ë¦¬í”¼ì§€: 0.1%                                        â”‚
â”‚                                                                         â”‚
â”‚  ğŸ›¡ï¸ ê°€ë“œë ˆì¼                                                            â”‚
â”‚  ìµœì†Œ ê±°ë˜: 30íšŒ â”‚ ìµœì†Œ ë…¸ì¶œ: 30% â”‚ ìµœëŒ€ íšŒì „ìœ¨: ì—° 24íšŒ               â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9. ëˆ„ìˆ˜ ë°©ì§€ ì²´í¬ë¦¬ìŠ¤íŠ¸ (v2 ì‹ ê·œ ë¶€ë¡)

### 9.1 ì‹ í˜¸ ê³„ì‚° vs ì²´ê²° ì‹œì 

| í•­ëª© | ì˜¬ë°”ë¥¸ ì²˜ë¦¬ | ì˜ëª»ëœ ì²˜ë¦¬ (ëˆ„ìˆ˜) |
|------|------------|-------------------|
| ì‹ í˜¸ ê³„ì‚° | Tì¼ ì¢…ê°€ ê¸°ì¤€ | Tì¼ ì¥ì¤‘ ë°ì´í„° ì‚¬ìš© |
| ì²´ê²° ì‹œì  | T+1ì¼ ì‹œê°€ ë˜ëŠ” ì¢…ê°€ | Tì¼ ì¢…ê°€ (ì‹ í˜¸ì™€ ë™ì‹œ) |
| ê°€ê²© ì°¸ì¡° | ì²´ê²° ì‹œì  ê°€ê²© | ì‹ í˜¸ ì‹œì  ê°€ê²© |

**ì˜¬ë°”ë¥¸ ì˜ˆ:**
```python
# Tì¼ ì¢…ê°€ë¡œ ì‹ í˜¸ ê³„ì‚°
signal = calculate_signal(close_t)

# T+1ì¼ ì‹œê°€ë¡œ ì²´ê²°
if signal == 'BUY':
    entry_price = open_t1  # ë‹¤ìŒë‚  ì‹œê°€
```

### 9.2 ê²°ì¸¡ì¹˜ ì²˜ë¦¬

| í•­ëª© | ì˜¬ë°”ë¥¸ ì²˜ë¦¬ | ì˜ëª»ëœ ì²˜ë¦¬ (ëˆ„ìˆ˜) |
|------|------------|-------------------|
| Forward Fill | ê³¼ê±° ê°’ìœ¼ë¡œ ì±„ì›€ | ë¯¸ë˜ ê°’ìœ¼ë¡œ ì±„ì›€ |
| ê²°ì¸¡ êµ¬ê°„ | ê±°ë˜ ì¤‘ë‹¨ ë˜ëŠ” ì œì™¸ | ë³´ê°„ìœ¼ë¡œ ë¯¸ë˜ ì •ë³´ ì‚¬ìš© |

**ì˜¬ë°”ë¥¸ ì˜ˆ:**
```python
# âœ… ê³¼ê±° ê°’ìœ¼ë¡œ ì±„ì›€
df['close'] = df['close'].ffill()

# âŒ ë¯¸ë˜ ê°’ ì‚¬ìš© (ëˆ„ìˆ˜)
df['close'] = df['close'].interpolate()  # ì„ í˜• ë³´ê°„ì€ ë¯¸ë˜ ì •ë³´ ì‚¬ìš©
```

### 9.3 ë¦¬ë°¸ëŸ°ì‹± ë‚ ì§œ

| í•­ëª© | ì˜¬ë°”ë¥¸ ì²˜ë¦¬ | ì˜ëª»ëœ ì²˜ë¦¬ (ëˆ„ìˆ˜) |
|------|------------|-------------------|
| ë¦¬ë°¸ëŸ°ì‹± ê²°ì • | ì›”ë§ ì¢…ê°€ ê¸°ì¤€ | ì›”ì´ˆ ë°ì´í„°ë¡œ ì›”ë§ ê²°ì • |
| ì‹¤í–‰ ì‹œì  | ìµì˜ì—…ì¼ ì‹œê°€ | ê²°ì • ë‹¹ì¼ ì¢…ê°€ |

### 9.4 ì§€í‘œ ê³„ì‚°

| í•­ëª© | ì˜¬ë°”ë¥¸ ì²˜ë¦¬ | ì˜ëª»ëœ ì²˜ë¦¬ (ëˆ„ìˆ˜) |
|------|------------|-------------------|
| ì´ë™í‰ê·  | ê³¼ê±° Nì¼ë§Œ ì‚¬ìš© | ë¯¸ë˜ ë°ì´í„° í¬í•¨ |
| í‘œì¤€í™” | Train ê¸°ê°„ í†µê³„ë¡œ | ì „ì²´ ê¸°ê°„ í†µê³„ë¡œ |
| ìˆœìœ„ | í•´ë‹¹ ì‹œì ê¹Œì§€ë§Œ | ë¯¸ë˜ ë°ì´í„° í¬í•¨ ìˆœìœ„ |

### 9.5 ì²´í¬ë¦¬ìŠ¤íŠ¸ (êµ¬í˜„ ì‹œ í™•ì¸)

```markdown
## ëˆ„ìˆ˜ ë°©ì§€ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì‹ í˜¸/ì²´ê²°
- [ ] ì‹ í˜¸ëŠ” Tì¼ ì¢…ê°€ ê¸°ì¤€ìœ¼ë¡œ ê³„ì‚°í•˜ëŠ”ê°€?
- [ ] ì²´ê²°ì€ T+1ì¼ ì‹œê°€(ë˜ëŠ” ì¢…ê°€)ë¡œ í•˜ëŠ”ê°€?
- [ ] ì²´ê²° ê°€ê²©ì´ ì‹ í˜¸ ì‹œì  ê°€ê²©ê³¼ ë¶„ë¦¬ë˜ì–´ ìˆëŠ”ê°€?

### ë°ì´í„° ì²˜ë¦¬
- [ ] ê²°ì¸¡ì¹˜ëŠ” ffill(ê³¼ê±° ê°’)ë¡œë§Œ ì±„ìš°ëŠ”ê°€?
- [ ] ë³´ê°„(interpolate)ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ê°€?
- [ ] í‘œì¤€í™”/ì •ê·œí™”ëŠ” Train ê¸°ê°„ í†µê³„ë§Œ ì‚¬ìš©í•˜ëŠ”ê°€?

### Split
- [ ] Splitì´ ì‹œê°„ ìˆœì„œ(chronological)ì¸ê°€?
- [ ] ëœë¤ ë¶„í• ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ê°€?
- [ ] Val/Test ê¸°ê°„ì´ ìµœì†Œ 4ê°œì›” ì´ìƒì¸ê°€?

### ì§€í‘œ
- [ ] ì´ë™í‰ê· /RSI ë“±ì´ ë¯¸ë˜ ë°ì´í„°ë¥¼ ì°¸ì¡°í•˜ì§€ ì•ŠëŠ”ê°€?
- [ ] ìˆœìœ„ ê³„ì‚°ì´ í•´ë‹¹ ì‹œì ê¹Œì§€ë§Œ ì‚¬ìš©í•˜ëŠ”ê°€?

### ë¦¬ë°¸ëŸ°ì‹±
- [ ] ë¦¬ë°¸ëŸ°ì‹± ê²°ì •ê³¼ ì‹¤í–‰ì´ ë¶„ë¦¬ë˜ì–´ ìˆëŠ”ê°€?
- [ ] ì‹¤í–‰ì€ ê²°ì • ìµì˜ì—…ì¼ì¸ê°€?
```

---

## 10. ë¦¬ìŠ¤í¬ / íŠ¸ë ˆì´ë“œì˜¤í”„ (v2)

| ì„¤ê³„ ê²°ì • | ì¥ì  | ë‹¨ì /ë¦¬ìŠ¤í¬ | ì™„í™” ë°©ì•ˆ |
|-----------|------|-------------|----------|
| **Test ë´‰ì¸** | ê³¼ì í•© ë°©ì§€ | ì‚¬ìš©ì ë¶ˆí¸ | "ì„ íƒ í™•ì •" ë²„íŠ¼ |
| **Val ê¸°ì¤€ ì„ íƒ** | ì¼ë°˜í™” ì„±ëŠ¥ ì¤‘ì‹œ | Val ë…¸ì´ì¦ˆ | ë¯¸ë‹ˆ Walk-Forward |
| **ìµœì†Œ ê¸°ê°„ ê·œì¹™** | ë…¸ì´ì¦ˆ ê°ì†Œ | ì§§ì€ ë°ì´í„° ì‚¬ìš© ë¶ˆê°€ | ê²½ê³  ë©”ì‹œì§€ |
| **min() ê²°í•©** | ì•ˆì •ì„± ê·¹ëŒ€í™” | ë³´ìˆ˜ì  ì„±ê³¼ | mean-k*std ì˜µì…˜ |
| **ê°€ë“œë ˆì¼** | ë¹„ì •ìƒ ê²°ê³¼ ì œê±° | ì¼ë¶€ ìœ íš¨ ê²°ê³¼ íƒˆë½ | ì„ê³„ê°’ ì¡°ì • ê°€ëŠ¥ |
| **ë¹„ìš© ê¸°ë³¸ ì ìš©** | í˜„ì‹¤ì  í‰ê°€ | ë¹„ìš© ì—†ëŠ” ë¹„êµ ë¶ˆê°€ | ë¹„ìš© 0 ì˜µì…˜ (ë¹„ê¶Œì¥) |
| **ë‹¨ìœ„ í†µì¼** | ë²„ê·¸ ë°©ì§€ | ê¸°ì¡´ ì½”ë“œ ìˆ˜ì • í•„ìš” | ë³€í™˜ í•¨ìˆ˜ ì œê³µ |

---

## 11. ë‹¤ìŒ ì•¡ì…˜ (êµ¬í˜„ ìš°ì„ ìˆœìœ„)

### Phase 0: ì¦‰ì‹œ ì ìš© (1~2ì¼)

1. **ë‹¨ìœ„ í†µì¼ ì ìš©**
   - ì—”ì§„ ë‚´ë¶€: ì†Œìˆ˜ë¡œ í†µì¼
   - UI: % í‘œì‹œ ë³€í™˜ í•¨ìˆ˜ ì ìš©
   - stop_loss ë²”ìœ„: [-0.20, -0.05]ë¡œ ë³€ê²½

2. **Test ë´‰ì¸ UI ì ìš©**
   - ê²°ê³¼ í…Œì´ë¸”ì—ì„œ Test ì»¬ëŸ¼ ğŸ”’ í‘œì‹œ
   - "ì„ íƒ í™•ì •" ë²„íŠ¼ ì¶”ê°€

3. **Objective í•¨ìˆ˜ ë³€ê²½**
   - `return val_sharpe` (Test ì‚¬ìš© ê¸ˆì§€)
   - ê°€ë“œë ˆì¼ ì¶”ê°€ (min_trades=30)
   - ë¹„ìš© ê¸°ë³¸ ì ìš©

### Phase 1: ë‹¨ê¸° (1ì£¼)

4. **Split ê·œì¹™ ê°•í™”**
   - Chronological ê°•ì œ
   - ìµœì†Œ ê¸°ê°„ ê²€ì¦ (Val â‰¥ 4M, Test â‰¥ 4M)

5. **ë©€í‹° ë£©ë°± ê²°í•© êµ¬í˜„**
   - min() ê²°í•© ê¸°ë³¸ê°’
   - UIì— ê²°í•© ë°©ì‹ í‘œì‹œ

6. **run_manifest v2 ì €ì¥**
   - seed, splitter_version, cost_model_version ì¶”ê°€
   - guardrail_checks í¬í•¨

### Phase 2: ì¤‘ê¸° (2~3ì£¼)

7. **ë¯¸ë‹ˆ Walk-Forward êµ¬í˜„**
   - ìœˆë„ìš° ìƒì„±ê¸° (end_date ì´ˆê³¼ ë°©ì§€)
   - ì•ˆì •ì„± ì ìˆ˜ ê³„ì‚°

8. **ëˆ„ìˆ˜ ë°©ì§€ ê²€ì¦**
   - ì²´í¬ë¦¬ìŠ¤íŠ¸ ê¸°ë°˜ ì½”ë“œ ë¦¬ë·°
   - ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì¶”ê°€

---

## ë¶€ë¡: ìš©ì–´ ì •ë¦¬

| ìš©ì–´ | ì„¤ëª… |
|------|------|
| **Chronological Split** | ì‹œê°„ ìˆœì„œëŒ€ë¡œ ë¶„í•  (ê³¼ê±°â†’ë¯¸ë˜) |
| **Guardrail** | ë¹„ì •ìƒ ê²°ê³¼ë¥¼ ê±¸ëŸ¬ë‚´ëŠ” ìµœì†Œ/ìµœëŒ€ ì¡°ê±´ |
| **Exposure Ratio** | ì „ì²´ ê¸°ê°„ ì¤‘ í¬ì§€ì…˜ ë³´ìœ  ë¹„ìœ¨ |
| **Turnover** | ì—°ê°„ ë§¤ë§¤ íšŒì „ìœ¨ |
| **min() ê²°í•©** | ë©€í‹° ë£©ë°± ì ìˆ˜ ì¤‘ ìµœì†Ÿê°’ ì‚¬ìš© |
| **ëˆ„ìˆ˜ (Leakage)** | ë¯¸ë˜ ì •ë³´ê°€ ê³¼ê±° ì‹œì ì— ì‚¬ìš©ë˜ëŠ” ì˜¤ë¥˜ |

{
  "run_id": "analysis_20251221_175517_8c9e4d",
  "created_at": "2025-12-21T17:55:17.473887",
  "schema_version": "4.1",
  "stage": "analysis",
  "config": {
    "period": {
      "start_date": "2020-01-01",
      "end_date": "2024-06-30"
    },
    "lookbacks": [
      3,
      6,
      12
    ],
    "lookback_combination": "min",
    "trials": 10,
    "objective": "val_sharpe_with_mdd_penalty",
    "split": {
      "method": "chronological",
      "target_ratios": {
        "train": 0.7,
        "val": 0.15,
        "test": 0.15
      },
      "min_val_months": 6,
      "min_test_months": 6,
      "applied": {
        "train_months": 42,
        "val_months": 6,
        "test_months": 6
      }
    },
    "guardrails": {
      "min_trades": 30,
      "min_exposure_ratio": 0.3,
      "max_annual_turnover": 24
    },
    "variables": {
      "ma_period": {
        "min": 20,
        "max": 100,
        "step": 10,
        "type": "int"
      },
      "rsi_period": {
        "min": 5,
        "max": 25,
        "step": 5,
        "type": "int"
      },
      "stop_loss_pct": {
        "min": 0.03,
        "max": 0.1,
        "step": 0.01,
        "type": "float",
        "unit": "decimal_positive"
      }
    },
    "cost_assumptions": {
      "commission_rate": 0.00015,
      "slippage_rate": 0.001,
      "cost_type": "one_way",
      "unit": "decimal"
    }
  },
  "data": {
    "universe_version": "etf_a_v1",
    "universe_source": "KRX",
    "delisted_handling": "exclude_from_start",
    "survivorship_bias": "point_in_time",
    "price_type": "adj_close",
    "dividend_handling": "total_return",
    "data_version": "mock_v1",
    "universe_hash": "209b2c981e59009b",
    "universe_count": 10,
    "requested_codes_count": 10,
    "effective_codes_count": 10,
    "requested_hash": "209b2c981e59009b",
    "effective_hash": "209b2c981e59009b",
    "sample_codes": [
      "069500",
      "102110",
      "229200",
      "114800",
      "122630"
    ]
  },
  "results": {
    "best_trial": {
      "trial_number": 1,
      "params": {
        "ma_period": 90,
        "rsi_period": 10,
        "stop_loss_pct": 0.04
      },
      "metrics": {
        "train": {
          "sharpe": 1.468793685347992,
          "cagr": 0.17540723399562302,
          "mdd": -0.21293804506023067
        },
        "val": {
          "sharpe": 1.506488061592838,
          "cagr": 0.19265773102342873,
          "mdd": -0.16373681037306329
        },
        "test": null
      },
      "guardrail_checks": {
        "num_trades": 71,
        "exposure_ratio": 0.6482633257399171,
        "annual_turnover": 7.084295662599077
      },
      "logic_checks": {
        "rsi_scale_days": 10,
        "rsi_scale_events": 10
      },
      "anomaly_flags": [],
      "debug": {
        "min_lookback_months": 3,
        "lookback_start_date": "2024-03-30",
        "params_hash": "0272e5a8e0474819",
        "cache_key": "92747108",
        "period_signature": "train:2020-01-01~2023-06-14|val:2023-06-15~2023-12-11"
      },
      "by_lookback": {
        "3": {
          "val_sharpe": 1.506488061592838,
          "val_cagr": 0.19265773102342873,
          "val_mdd": -0.16373681037306329,
          "score": 1.4246196564063063,
          "cache_key": "92747108",
          "debug": {
            "effective_eval_start": "2023-06-15",
            "bars_used": 128,
            "signal_days": 0,
            "order_count": 0,
            "lookback_start_date": "2024-03-30"
          }
        },
        "6": {
          "val_sharpe": 1.506488061592838,
          "val_cagr": 0.19265773102342873,
          "val_mdd": -0.16373681037306329,
          "score": 1.4246196564063063,
          "cache_key": "5d97ecdd",
          "debug": {
            "effective_eval_start": "2023-06-15",
            "bars_used": 128,
            "signal_days": 0,
            "order_count": 0,
            "lookback_start_date": "2023-12-30"
          }
        },
        "12": {
          "val_sharpe": 1.506488061592838,
          "val_cagr": 0.19265773102342873,
          "val_mdd": -0.16373681037306329,
          "score": 1.4246196564063063,
          "cache_key": "2743dad8",
          "debug": {
            "effective_eval_start": "2023-06-15",
            "bars_used": 128,
            "signal_days": 0,
            "order_count": 0,
            "lookback_start_date": "2023-06-30"
          }
        }
      },
      "combined_score": 1.4246196564063063,
      "walkforward": {
        "windows": 6,
        "outsample_sharpes": [
          0.9959092862885123,
          0.9394595331010326,
          0.6081888725873927,
          1.585368591811493,
          1.2945815517746722,
          1.049606774859792
        ],
        "stability_score": 2.6753502366687436,
        "win_rate": 1.0
      }
    },
    "all_trials_count": 10,
    "convergence_trial": null,
    "search_coverage": 0.027777777777777776
  },
  "environment": {
    "code_version": "git:5ed8e533",
    "python_version": "3.13.5",
    "optuna_version": "4.5.0",
    "random_seed": 42,
    "splitter_version": "chronological_v1",
    "cost_model_version": "simple_oneway_v1"
  },
  "engine_health": {
    "is_valid": true,
    "warnings": [],
    "data_quality": {
      "missing_ratio": 0.001,
      "outlier_count": 0
    }
  }
}